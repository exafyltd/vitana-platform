// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model OasisEvent {
  id        String   @id @default(cuid())
  rid       String // external request/event id (optional but recommended)
  service   String
  event     String
  tenant    String // "system" | "maxina" | "earthlings" | "alkalma" | etc.
  status    String // "start" | "success" | "fail" | "blocked" | ...
  notes     String?  @db.Text
  gitSha    String?  @map("git_sha")
  metadata  Json?
  createdAt DateTime @default(now()) @map("created_at")

  @@index([createdAt], map: "idx_oasis_events_created_at")
  @@index([service, createdAt], map: "idx_oasis_events_service_created")
  @@index([tenant, createdAt], map: "idx_oasis_events_tenant_created")
  @@index([status, createdAt], map: "idx_oasis_events_status_created")
}
