name: Enforce Frontend Canonical Source

on: [pull_request]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Run canonical source validator
        run: |
          node -e "
            const v = require('./services/validators/frontend-canonical-source.js');
            const result = v.validateFrontendCanonicalSource('.');
            if (!result.ok) {
              console.error('❌ Canonical Source Violations:');
              console.error(result.errors.join('\n'));
              process.exit(1);
            }
            console.log('✅ Frontend canonical source validated.');
          "
