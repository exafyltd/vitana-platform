# VTID-0301 - Autonomous System Reality Inventory

**Family:** DEV
**Module:** OASIS / DEV-CONSOLE
**Series:** 0300 (Cleanup & Refactor)
**Generated:** 2025-11-30T19:30:00.000Z
**Generated By:** Claude CAEO (Chief Autonomous Execution Officer)

---

## Executive Summary

This document provides a comprehensive reality-based inventory of the Vitana Dev System, covering:
- GitHub repository structure and services
- GCP Cloud Run services
- Supabase/OASIS database schemas
- Frontend Command Hub implementation

This serves as the **baseline for all future planning and refactor tasks in the 0300-series**.

---

## 1. GitHub / vitana-platform

### Services Inventory

| Service | Path | Role | Status |
|---------|------|------|--------|
| **gateway** | `services/gateway` | Main API Gateway - Express/TypeScript, routes all API traffic, hosts Command Hub | Active |
| **oasis-projector** | `services/oasis-projector` | Event Projector - processes OASIS events to downstream systems | Active |
| **oasis-operator** | `services/oasis-operator` | Legacy service - only backup files present | Deprecated |
| **mcp-gateway** | `services/mcp-gateway` | MCP Integration - 6 connectors, 21 skills | Active |
| **agents/conductor** | `services/agents/conductor` | Agent orchestrator with LLM Router | Active |
| **agents/crewai-gcp** | `services/agents/crewai-gcp` | CrewAI implementation - KB executor | Active |
| **agents/memory-indexer** | `services/agents/memory-indexer` | Memory indexing and vector management | Active |
| **agents/validator-core** | `services/agents/validator-core` | Validator agent with LLM Router | Active |

### Key Directories

- `prisma/` - Prisma ORM schema and migrations
- `specs/` - OpenAPI specifications
- `supabase/migrations/` - Supabase SQL migrations
- `database/migrations/` - Additional database migrations
- `docs/` - Documentation including governance and VTID system
- `packages/openapi/` - OpenAPI package
- `skills/` - Agent skills definitions
- `tasks/` - Task definitions

### CI/CD Workflows

1. **CICDL-GATEWAY-CI** (DEV-CICDL-0034) - Gateway validation
2. **APPLY-MIGRATIONS** - Database migrations
3. **DAILY-STATUS-UPDATE** - Daily status reporting
4. **EXEC-DEPLOY** - Deployment execution
5. **DEPLOY-MCP-GATEWAY** - MCP Gateway deployment
6. **ENFORCE-FRONTEND-CANONICAL-SOURCE** - Frontend spec validation (17 modules / 87 screens)

---

## 2. GCP Cloud Run Services

| Service | URL | Status | Notes |
|---------|-----|--------|-------|
| **Gateway** | `gateway-q74ibpv6ia-uc.a.run.app` | Unknown | Canonical Dev Sandbox Gateway. HTTP check returned 403 due to sandbox network restrictions. |
| **OASIS Operator** | `oasis-operator-86804897789.us-central1.run.app` | Unknown | Referenced in code for health checks. May be deprecated. |
| **MCP Gateway** | Unknown | Unknown | Deployment URL not discovered via code inspection. |

### Confirmed API Endpoints (from code analysis)

- `/alive`, `/health` - Health checks
- `/api/v1/events/ingest` - Event ingestion
- `/api/v1/oasis/events` - OASIS events query
- `/api/v1/oasis/tasks` - OASIS tasks CRUD
- `/api/v1/vtid/*` - VTID management
- `/api/v1/governance/*` - Governance endpoints
- `/api/v1/operator/*` - Operator Console API
- `/api/v1/github/*` - GitHub integration
- `/api/v1/cicd/health` - CI/CD health
- `/command-hub/` - Frontend UI
- `/api/v1/events/stream` - SSE stream

---

## 3. Supabase / OASIS Schemas

### Core Tables

| Table | Purpose | Key VTIDs |
|-------|---------|-----------|
| **oasis_events** | Event ledger - stores all OASIS events | VTID-0522 |
| **vtid_ledger** | VTID task tracking with status and event sync | VTID-0521, VTID-0522 |
| **projection_offsets** | Projection progress for event sourcing | DEV-OASIS-0010 |
| **software_versions** | Deployment history - immutable audit log | VTID-0510 |

### Governance Tables

| Table | Purpose |
|-------|---------|
| **governance_categories** | Rule categories with severity levels |
| **governance_rules** | Rules with JSONB logic definitions |
| **governance_evaluations** | Rule evaluation results (PASS/FAIL) |
| **governance_violations** | Violations with status tracking |
| **governance_enforcements** | Enforcement actions log |
| **governance_proposals** | Governance change proposals |

### Key Columns - oasis_events

```
id, rid, service, event, tenant, status, notes, git_sha,
metadata, created_at, vtid, topic, message, role, model,
link, source, projected
```

### Key Columns - vtid_ledger

```
id, vtid, task_family, task_type, description, status,
assigned_to, tenant, metadata, parent_vtid, created_at,
updated_at, last_event_id, last_event_at, service,
environment, layer, module, title, summary
```

---

## 4. Frontend - Command Hub

### Golden v4 Baseline: CONFIRMED

The Command Hub implements the Golden v4 baseline with:

- **17 Sidebar Modules**
- **87 Total Screens**
- **3-Column Task Board Design**
- **Header Toolbar** with version history and CI/CD health
- **Collapsible Sidebar**
- **Split-Screen Support**
- **SSE Live Events**
- **Operator & Heartbeat Overlays**
- **Toast Notifications**

### Sidebar Modules

1. Overview (5 tabs)
2. Admin (6 tabs)
3. Operator (5 tabs)
4. Command Hub (5 tabs)
5. Governance (6 tabs)
6. Agents (5 tabs)
7. Workflows (5 tabs)
8. OASIS (5 tabs)
9. Databases (5 tabs)
10. Infrastructure (5 tabs)
11. Security (5 tabs)
12. Integrations & Tools (5 tabs)
13. Diagnostics (5 tabs)
14. Models & Evaluations (5 tabs)
15. Testing & QA (5 tabs)
16. Intelligence & Memory (5 tabs)
17. Docs (5 tabs)

### Frontend Files

- `/command-hub/index.html` - Main HTML entry point
- `/command-hub/app.js` - Application logic (~1500+ lines)
- `/command-hub/styles.css` - CSS with design tokens
- `/command-hub/navigation-config.js` - Navigation configuration

---

## 5. Confirmed Reality vs Spec Gaps

### Low Severity

| Issue | Recommendation |
|-------|----------------|
| Could not verify live Gateway status via HTTP | Manual verification of /alive endpoint recommended |
| navigation-config.js and app.js both define NAVIGATION_CONFIG | Ensure single source of truth |

### Medium Severity

| Issue | Recommendation |
|-------|----------------|
| Several services lack README/manifest | Add manifest.json to all services |
| oasis-operator contains only backup files | Confirm if Cloud Run service can be decommissioned |
| Agent services lack clear deployment status | Document Cloud Run URLs for each agent |

---

## 6. MCP Gateway Skills Inventory

**Total: 21 skills across 6 connectors**

| Connector | Skills Count |
|-----------|--------------|
| GitHub MCP | 4 skills |
| Supabase MCP | 3 skills |
| Perplexity MCP | 2 skills |
| Linear MCP | 4 skills |
| Context7 MCP | 4 skills |
| Testsprite MCP | 4 skills |

---

## Appendix: Key VTID References

| VTID | Description |
|------|-------------|
| CORE-GATEWAY-001 | Gateway service definition |
| DEV-CICDL-0034 | Gateway CI workflow |
| DEV-OASIS-0010 | OASIS projector implementation |
| VTID-0509 | Operator Console API |
| VTID-0510 | Software Version Tracking |
| VTID-0521 | Automatic VTID ledger writer |
| VTID-0522 | Auto-ledger writer mapping & status endpoints |
| DEV-AGENT-0200/0201/0202 | MCP Gateway integration |

---

**Report Generated:** VTID-0301 - Reality Snapshot v1
**Status:** Complete
**Next Steps:** Use this inventory as baseline for 0300-series cleanup and refactor tasks.
